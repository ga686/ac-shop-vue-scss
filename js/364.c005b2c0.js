"use strict";(self["webpackChunksimple_twitter"]=self["webpackChunksimple_twitter"]||[]).push([[364],{9787:function(t,s,i){i.d(s,{Z:function(){return d}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"navbar ml-auto d-flex justify-content-between"},[s("div",{staticClass:"navbar_wrap"},[s("div",{staticClass:"navbar_logo"},[s("router-link",{attrs:{to:"/admin/tweets"}},[s("img",{attrs:{src:i(6602)}})])],1),s("div",{staticClass:"navbar_item"},[s("router-link",{staticClass:"nav_link",attrs:{to:"/admin/tweets"}},[s("div",{staticClass:"nav_link-icon home"}),t._v("推文清單 ")])],1),s("div",{staticClass:"navbar_item"},[s("router-link",{staticClass:"nav_link",attrs:{to:"/admin/users"}},[s("div",{staticClass:"nav_link-icon user"}),t._v("使用者列表 ")])],1)]),s("div",{staticClass:"navbar_item",on:{click:t.logout}},[t._m(0)])])},a=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"nav_link"},[s("div",{staticClass:"nav_link-icon logout"}),t._v("登出 ")])}],n=(i(7658),i(3822)),r={computed:{...(0,n.rn)(["currentUser","isAuthenticated"])},methods:{logout(){this.$store.commit("rmAuthentication"),this.$router.push("/admin/signin")}}},l=r,c=i(1001),o=(0,c.Z)(l,e,a,!1,null,"65e0b72c",null),d=o.exports},4364:function(t,s,i){i.r(s),i.d(s,{default:function(){return _}});var e=function(){var t=this,s=t._self._c;return s("main",{staticClass:"admin-view"},[s("NavbarAdmin"),t.isProcessing?s("LoadingSpinner"):[s("div",{staticClass:"admin_box"},[s("div",{staticClass:"admin_box-title"},[s("h5",{staticClass:"size-18"},[t._v("推文清單")])]),s("div",{staticClass:"admin_box_wrap"},t._l(t.tweets,(function(i){return s("div",{key:i.id,staticClass:"admin_box_wrap-item d-flex"},[s("div",{staticClass:"d-flex flex-fill"},[s("div",{staticClass:"avatar_image"},[s("img",{attrs:{src:t._f("emptyImage")(i.userData.avatar)}})]),s("div",[s("div",{staticClass:"d-flex admin_box_wrap-title align-items-center"},[s("h5",{staticClass:"size-16"},[t._v(t._s(i.userData.name))]),s("p",{staticClass:"size-14 ml-1"},[t._v(t._s(t._f("account")(i.userData.account)))]),t._v(" ・ "),s("span",{staticClass:"size-14"},[t._v(t._s(t._f("fromNow")(i.createAt)))])]),s("div",{staticClass:"mb-3 mt-1 admin_box_wrap-content"},[t._v(t._s(i.description))])])]),s("div",{staticClass:"tweet-delete-btn",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteTweet(i.id)}}},[s("i",{staticClass:"fa-solid fa-xmark size-20"})])])})),0)])]],2)},a=[],n=i(9787),r=i(4711),l=i(4409),c=i(3507),o=i(6163),d={data(){return{tweets:[],isProcessing:!1}},components:{NavbarAdmin:n.Z,LoadingSpinner:l.Z},mixins:[c.Lf,c.qk,c.$2],methods:{async fetchTweets(){try{this.isProcessing=!0;const{data:t}=await r.Z.getAllTweets();if("error"===t.status)throw new Error(t.message);this.tweets=t,this.isProcessing=!1}catch(t){this.isProcessing=!1,console.log(t),o.F.fire({icon:"error",title:"無法取得推文資料，請稍後再試"})}},async deleteTweet(t){try{const{data:s}=await r.Z.deleteTweet(t);if("error"===s.status)throw new Error(s.message);this.tweets=this.tweets.filter((s=>s.id!==t))}catch(s){o.F.fire({icon:"error",title:"無法刪除推文，請稍後再試"})}}},created(){this.fetchTweets()}},u=d,v=i(1001),m=(0,v.Z)(u,e,a,!1,null,"1251eb58",null),_=m.exports},4711:function(t,s,i){var e=i(6163);s["Z"]={signIn({account:t,password:s}){return e.l.post("/api/admin/signin",{account:t,password:s})},getAllTweets(){return e.l.get("/api/admin/tweets")},getAllUsers(){return e.l.get("/api/admin/users")},deleteTweet(t){return e.l["delete"](`/api/admin/tweets/${t}`)}}}}]);
//# sourceMappingURL=364.c005b2c0.js.map